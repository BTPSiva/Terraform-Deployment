general:
  verbose: true

stages:
  - name: Init
  - name: Plan
  - name: Apply

steps:
  Init:
    runSh:
      shell: bash
      script: |
        echo "🚀 Running Terraform Init"
        cd terraform
        terraform init

  Plan:
    runSh:
      shell: bash
      script: |
        echo "📐 Running Terraform Plan"
        cd terraform
        terraform plan -out=tfplan

  Apply:
    runSh:
      shell: bash
      script: |
        echo "⚙️ Applying Terraform"
        cd terraform
        terraform apply -auto-approve tfplan
